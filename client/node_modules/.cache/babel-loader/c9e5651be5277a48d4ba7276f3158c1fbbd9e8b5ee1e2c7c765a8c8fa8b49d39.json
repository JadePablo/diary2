{"ast":null,"code":"import axios from 'axios';\nconst URL = \"http://localhost:5000\";\n\n// Function to handle login success and verify the token\nasync function handleLoginSuccess(token) {\n  try {\n    const response = await axios.get(`${URL}/decode`, {\n      params: {\n        credential: token.credential\n      }\n    });\n    const decodedToken = response.data;\n    // Use the user information as needed\n    return decodedToken;\n  } catch (error) {\n    throw new Error('Token verification failed');\n  }\n}\n\n// Function to post a new journal entry\nasync function postNewEntry(entryData) {\n  try {\n    const response = await axios.post(`${URL}/upload`, entryData);\n    return response.data;\n  } catch (error) {\n    throw new Error('Failed to post journal entry');\n  }\n}\n\n// Function to update online status\nasync function updateOnlineStatus(email) {\n  try {\n    const response = await axios.put(`${URL}/online-status`, {\n      params: {\n        email\n      }\n    });\n    return response.data;\n  } catch (error) {\n    throw new Error('Failed to update online status');\n  }\n}\n\n// Function to get journal entries\nasync function getJournalEntries(email) {\n  try {\n    const response = await axios.get(`${URL}/journal-entries`, {\n      params: {\n        email\n      }\n    });\n    return response.data;\n  } catch (error) {\n    throw new Error('Failed to retrieve journal entries');\n  }\n}\n\n// Function to update online status\nasync function update_OnlineStatus(req, res) {\n  const email = req.query.email;\n  try {\n    // Call the getJournalEntries function and pass the email\n    const journalEntries = await getJournalEntries(email);\n\n    // ... perform any additional operations using the retrieved journal entries ...\n\n    // Update the online status\n    const updatedUser = await User.findOneAndUpdate({\n      email\n    }, {\n      lastActiveTime: new Date()\n    }, {\n      new: true,\n      upsert: true\n    });\n    res.json({\n      journalEntries,\n      updatedUser\n    });\n  } catch (error) {\n    console.error('Error:', error);\n    res.status(500).json({\n      error: 'Failed to update online status'\n    });\n  }\n}\nexport { handleLoginSuccess, postNewEntry, updateOnlineStatus, getJournalEntries };","map":{"version":3,"names":["axios","URL","handleLoginSuccess","token","response","get","params","credential","decodedToken","data","error","Error","postNewEntry","entryData","post","updateOnlineStatus","email","put","getJournalEntries","update_OnlineStatus","req","res","query","journalEntries","updatedUser","User","findOneAndUpdate","lastActiveTime","Date","new","upsert","json","console","status"],"sources":["C:/Users/jadep/Desktop/diary2/diary2/client/src/api.js"],"sourcesContent":["import axios from 'axios';\r\n\r\nconst URL = \"http://localhost:5000\";\r\n\r\n// Function to handle login success and verify the token\r\nasync function handleLoginSuccess(token) {\r\n  try {\r\n    const response = await axios.get(`${URL}/decode`, {\r\n      params: {\r\n        credential: token.credential,\r\n      },\r\n    });\r\n    const decodedToken = response.data;\r\n    // Use the user information as needed\r\n    return decodedToken;\r\n  } catch (error) {\r\n    throw new Error('Token verification failed');\r\n  }\r\n}\r\n\r\n// Function to post a new journal entry\r\nasync function postNewEntry(entryData) {\r\n  try {\r\n    const response = await axios.post(`${URL}/upload`, entryData);\r\n    return response.data;\r\n  } catch (error) {\r\n    throw new Error('Failed to post journal entry');\r\n  }\r\n}\r\n\r\n// Function to update online status\r\nasync function updateOnlineStatus(email) {\r\n  try {\r\n    const response = await axios.put(`${URL}/online-status`, {\r\n      params: {\r\n        email,\r\n      },\r\n    });\r\n    return response.data;\r\n  } catch (error) {\r\n    throw new Error('Failed to update online status');\r\n  }\r\n}\r\n\r\n// Function to get journal entries\r\nasync function getJournalEntries(email) {\r\n  try {\r\n    const response = await axios.get(`${URL}/journal-entries`, {\r\n      params: {\r\n        email,\r\n      },\r\n    });\r\n    return response.data;\r\n  } catch (error) {\r\n    throw new Error('Failed to retrieve journal entries');\r\n  }\r\n}\r\n\r\n// Function to update online status\r\nasync function update_OnlineStatus(req, res) {\r\n  const email = req.query.email;\r\n\r\n  try {\r\n    // Call the getJournalEntries function and pass the email\r\n    const journalEntries = await getJournalEntries(email);\r\n\r\n    // ... perform any additional operations using the retrieved journal entries ...\r\n\r\n    // Update the online status\r\n    const updatedUser = await User.findOneAndUpdate(\r\n      { email },\r\n      { lastActiveTime: new Date() },\r\n      { new: true, upsert: true }\r\n    );\r\n\r\n    res.json({\r\n      journalEntries,\r\n      updatedUser\r\n    });\r\n  } catch (error) {\r\n    console.error('Error:', error);\r\n    res.status(500).json({ error: 'Failed to update online status' });\r\n  }\r\n}\r\n\r\nexport { handleLoginSuccess, postNewEntry, updateOnlineStatus, getJournalEntries };\r\n"],"mappings":"AAAA,OAAOA,KAAK,MAAM,OAAO;AAEzB,MAAMC,GAAG,GAAG,uBAAuB;;AAEnC;AACA,eAAeC,kBAAkBA,CAACC,KAAK,EAAE;EACvC,IAAI;IACF,MAAMC,QAAQ,GAAG,MAAMJ,KAAK,CAACK,GAAG,CAAE,GAAEJ,GAAI,SAAQ,EAAE;MAChDK,MAAM,EAAE;QACNC,UAAU,EAAEJ,KAAK,CAACI;MACpB;IACF,CAAC,CAAC;IACF,MAAMC,YAAY,GAAGJ,QAAQ,CAACK,IAAI;IAClC;IACA,OAAOD,YAAY;EACrB,CAAC,CAAC,OAAOE,KAAK,EAAE;IACd,MAAM,IAAIC,KAAK,CAAC,2BAA2B,CAAC;EAC9C;AACF;;AAEA;AACA,eAAeC,YAAYA,CAACC,SAAS,EAAE;EACrC,IAAI;IACF,MAAMT,QAAQ,GAAG,MAAMJ,KAAK,CAACc,IAAI,CAAE,GAAEb,GAAI,SAAQ,EAAEY,SAAS,CAAC;IAC7D,OAAOT,QAAQ,CAACK,IAAI;EACtB,CAAC,CAAC,OAAOC,KAAK,EAAE;IACd,MAAM,IAAIC,KAAK,CAAC,8BAA8B,CAAC;EACjD;AACF;;AAEA;AACA,eAAeI,kBAAkBA,CAACC,KAAK,EAAE;EACvC,IAAI;IACF,MAAMZ,QAAQ,GAAG,MAAMJ,KAAK,CAACiB,GAAG,CAAE,GAAEhB,GAAI,gBAAe,EAAE;MACvDK,MAAM,EAAE;QACNU;MACF;IACF,CAAC,CAAC;IACF,OAAOZ,QAAQ,CAACK,IAAI;EACtB,CAAC,CAAC,OAAOC,KAAK,EAAE;IACd,MAAM,IAAIC,KAAK,CAAC,gCAAgC,CAAC;EACnD;AACF;;AAEA;AACA,eAAeO,iBAAiBA,CAACF,KAAK,EAAE;EACtC,IAAI;IACF,MAAMZ,QAAQ,GAAG,MAAMJ,KAAK,CAACK,GAAG,CAAE,GAAEJ,GAAI,kBAAiB,EAAE;MACzDK,MAAM,EAAE;QACNU;MACF;IACF,CAAC,CAAC;IACF,OAAOZ,QAAQ,CAACK,IAAI;EACtB,CAAC,CAAC,OAAOC,KAAK,EAAE;IACd,MAAM,IAAIC,KAAK,CAAC,oCAAoC,CAAC;EACvD;AACF;;AAEA;AACA,eAAeQ,mBAAmBA,CAACC,GAAG,EAAEC,GAAG,EAAE;EAC3C,MAAML,KAAK,GAAGI,GAAG,CAACE,KAAK,CAACN,KAAK;EAE7B,IAAI;IACF;IACA,MAAMO,cAAc,GAAG,MAAML,iBAAiB,CAACF,KAAK,CAAC;;IAErD;;IAEA;IACA,MAAMQ,WAAW,GAAG,MAAMC,IAAI,CAACC,gBAAgB,CAC7C;MAAEV;IAAM,CAAC,EACT;MAAEW,cAAc,EAAE,IAAIC,IAAI,CAAC;IAAE,CAAC,EAC9B;MAAEC,GAAG,EAAE,IAAI;MAAEC,MAAM,EAAE;IAAK,CAC5B,CAAC;IAEDT,GAAG,CAACU,IAAI,CAAC;MACPR,cAAc;MACdC;IACF,CAAC,CAAC;EACJ,CAAC,CAAC,OAAOd,KAAK,EAAE;IACdsB,OAAO,CAACtB,KAAK,CAAC,QAAQ,EAAEA,KAAK,CAAC;IAC9BW,GAAG,CAACY,MAAM,CAAC,GAAG,CAAC,CAACF,IAAI,CAAC;MAAErB,KAAK,EAAE;IAAiC,CAAC,CAAC;EACnE;AACF;AAEA,SAASR,kBAAkB,EAAEU,YAAY,EAAEG,kBAAkB,EAAEG,iBAAiB"},"metadata":{},"sourceType":"module","externalDependencies":[]}