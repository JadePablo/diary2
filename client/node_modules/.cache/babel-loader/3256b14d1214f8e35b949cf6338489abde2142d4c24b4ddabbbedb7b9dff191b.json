{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\jadep\\\\Desktop\\\\diary2\\\\diary2\\\\client\\\\src\\\\components\\\\editJournal\\\\EditJournal.jsx\",\n  _s = $RefreshSig$(),\n  _s2 = $RefreshSig$();\nimport React, { useEffect, useState } from 'react';\nimport Box from '@mui/material/Box';\nimport { useParams, useNavigate } from 'react-router-dom';\nimport { useSelector } from 'react-redux';\nimport { postNewEntry } from '../../api.js';\nimport { Typography } from '@mui/material';\nimport JournalForm from './editJournalComponents/JournalForm';\nimport PromptMessage from './editJournalComponents/PromptMessage';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction useHandleVisitor(username) {\n  _s();\n  const navigate = useNavigate();\n  const storedName = localStorage.getItem('name');\n  React.useEffect(() => {\n    if (storedName !== username || storedName == null) {\n      navigate('/');\n    }\n  }, [storedName, username, navigate]);\n\n  // Store the name in local storage whenever it changes\n  React.useEffect(() => {\n    localStorage.setItem('name', username);\n  }, [username]);\n}\n_s(useHandleVisitor, \"khgsfvlVLpWikUdAayORL272oMo=\", false, function () {\n  return [useNavigate];\n});\nexport default function EditJournal() {\n  _s2();\n  const {\n    username\n  } = useParams();\n  const email = useSelector(state => state.login.email);\n  const navigate = useNavigate();\n  useHandleVisitor(username);\n  const [text, setText] = useState('');\n  const [title, setTitle] = useState('');\n  const [image, setImage] = useState('');\n  const [openDate, setOpenDate] = useState('');\n  const [showPrompt, setShowPrompt] = useState(false);\n  const handleTextChange = e => {\n    setText(e.target.value);\n  };\n  const handleTitleChange = e => {\n    setTitle(e.target.value);\n  };\n  const handleImageUpload = e => {\n    const file = e.target.files[0];\n    const reader = new FileReader();\n    reader.onloadend = () => {\n      setImage(reader.result);\n    };\n    if (file) {\n      reader.readAsDataURL(file);\n    }\n  };\n  const handleClearImage = () => {\n    setImage('');\n  };\n  const handleSaveJournalEntry = () => {\n    if (title.trim() === '' || text.trim() === '' || openDate.trim() === '') {\n      setShowPrompt(true);\n    } else {\n      postNewEntry(email, title, text, openDate, image);\n      navigate(`/journals/${username}`);\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(Box, {\n    sx: {\n      padding: '2rem',\n      width: '100%',\n      display: 'flex',\n      justifyContent: 'center'\n    },\n    children: /*#__PURE__*/_jsxDEV(Box, {\n      sx: {\n        width: '100%',\n        maxWidth: '600px'\n      },\n      children: [/*#__PURE__*/_jsxDEV(Typography, {\n        variant: \"h4\",\n        component: \"h1\",\n        align: \"center\",\n        children: \"Edit Journal\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 82,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(JournalForm, {\n        title: title,\n        text: text,\n        openDate: openDate,\n        image: image,\n        handleTitleChange: handleTitleChange,\n        handleTextChange: handleTextChange,\n        handleImageUpload: handleImageUpload,\n        handleClearImage: handleClearImage,\n        setShowPrompt: setShowPrompt,\n        handleSaveJournalEntry: handleSaveJournalEntry,\n        setOpenDate: setOpenDate // Pass setOpenDate prop\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 85,\n        columnNumber: 9\n      }, this), showPrompt && /*#__PURE__*/_jsxDEV(PromptMessage, {\n        setShowPrompt: setShowPrompt\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 98,\n        columnNumber: 24\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 81,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 73,\n    columnNumber: 5\n  }, this);\n}\n_s2(EditJournal, \"oWWQRvHUMGptFq+aC/x7UFYqiXM=\", false, function () {\n  return [useParams, useSelector, useNavigate, useHandleVisitor];\n});\n_c = EditJournal;\nvar _c;\n$RefreshReg$(_c, \"EditJournal\");","map":{"version":3,"names":["React","useEffect","useState","Box","useParams","useNavigate","useSelector","postNewEntry","Typography","JournalForm","PromptMessage","jsxDEV","_jsxDEV","useHandleVisitor","username","_s","navigate","storedName","localStorage","getItem","setItem","EditJournal","_s2","email","state","login","text","setText","title","setTitle","image","setImage","openDate","setOpenDate","showPrompt","setShowPrompt","handleTextChange","e","target","value","handleTitleChange","handleImageUpload","file","files","reader","FileReader","onloadend","result","readAsDataURL","handleClearImage","handleSaveJournalEntry","trim","sx","padding","width","display","justifyContent","children","maxWidth","variant","component","align","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["C:/Users/jadep/Desktop/diary2/diary2/client/src/components/editJournal/EditJournal.jsx"],"sourcesContent":["import React, { useEffect, useState } from 'react';\r\nimport Box from '@mui/material/Box';\r\nimport { useParams, useNavigate } from 'react-router-dom';\r\nimport { useSelector } from 'react-redux';\r\nimport { postNewEntry } from '../../api.js';\r\nimport { Typography } from '@mui/material';\r\nimport JournalForm from './editJournalComponents/JournalForm';\r\nimport PromptMessage from './editJournalComponents/PromptMessage';\r\n\r\nfunction useHandleVisitor(username) {\r\n  const navigate = useNavigate();\r\n  const storedName = localStorage.getItem('name');\r\n\r\n  React.useEffect(() => {\r\n    if (storedName !== username || storedName == null) {\r\n      navigate('/');\r\n    }\r\n  }, [storedName, username, navigate]);\r\n\r\n  // Store the name in local storage whenever it changes\r\n  React.useEffect(() => {\r\n    localStorage.setItem('name', username);\r\n  }, [username]);\r\n}\r\n\r\nexport default function EditJournal() {\r\n  const { username } = useParams();\r\n  const email = useSelector((state) => state.login.email);\r\n  const navigate = useNavigate();\r\n  useHandleVisitor(username);\r\n\r\n  const [text, setText] = useState('');\r\n  const [title, setTitle] = useState('');\r\n  const [image, setImage] = useState('');\r\n  const [openDate, setOpenDate] = useState('');\r\n  const [showPrompt, setShowPrompt] = useState(false);\r\n\r\n  const handleTextChange = (e) => {\r\n    setText(e.target.value);\r\n  };\r\n\r\n  const handleTitleChange = (e) => {\r\n    setTitle(e.target.value);\r\n  };\r\n\r\n  const handleImageUpload = (e) => {\r\n    const file = e.target.files[0];\r\n    const reader = new FileReader();\r\n\r\n    reader.onloadend = () => {\r\n      setImage(reader.result);\r\n    };\r\n\r\n    if (file) {\r\n      reader.readAsDataURL(file);\r\n    }\r\n  };\r\n\r\n  const handleClearImage = () => {\r\n    setImage('');\r\n  };\r\n\r\n  const handleSaveJournalEntry = () => {\r\n    if (title.trim() === '' || text.trim() === '' || openDate.trim() === '') {\r\n      setShowPrompt(true);\r\n    } else {\r\n      postNewEntry(email, title, text, openDate, image);\r\n      navigate(`/journals/${username}`);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <Box\r\n      sx={{\r\n        padding: '2rem',\r\n        width: '100%',\r\n        display: 'flex',\r\n        justifyContent: 'center',\r\n      }}\r\n    >\r\n      <Box sx={{ width: '100%', maxWidth: '600px' }}>\r\n        <Typography variant=\"h4\" component=\"h1\" align=\"center\">\r\n          Edit Journal\r\n        </Typography>\r\n        <JournalForm\r\n          title={title}\r\n          text={text}\r\n          openDate={openDate}\r\n          image={image}\r\n          handleTitleChange={handleTitleChange}\r\n          handleTextChange={handleTextChange}\r\n          handleImageUpload={handleImageUpload}\r\n          handleClearImage={handleClearImage}\r\n          setShowPrompt={setShowPrompt}\r\n          handleSaveJournalEntry={handleSaveJournalEntry}\r\n          setOpenDate={setOpenDate} // Pass setOpenDate prop\r\n        />\r\n        {showPrompt && <PromptMessage setShowPrompt={setShowPrompt} />}\r\n      </Box>\r\n    </Box>\r\n  );\r\n}\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}